<!DOCTYPE html>
<html lang="th">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>ข้อมูลโรงไฟฟ้า</title>
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Plus+Jakarta+Sans:wght@400;500;600;700&display=swap" rel="stylesheet">
  <link rel="stylesheet" href="./style.css">
</head>
<body>
  <div class="shell">
    <div class="top-controls">
      <div class="left-group">
        <button class="ghost back-btn icon-btn" id="back-btn" type="button" aria-label="กลับหน้ารายการ" title="กลับหน้ารายการ">
          <svg width="18" height="18" viewBox="0 0 24 24" fill="none" aria-hidden="true">
            <path d="M14.5 5.5 8 12l6.5 6.5" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
          </svg>
        </button>
        <div class="mode-toggle">
          <button class="toggle-btn active" id="mode-meters" type="button">Meters</button>
          <button class="toggle-btn" id="mode-billing" type="button">Billing</button>
        </div>
      </div>
    </div>

    <section class="plant-hero">
      <div>
        <p class="eyebrow">Plant</p>
        <h1 id="plant-name">ชื่อโรงไฟฟ้า</h1>
      </div>
    </section>

    <section class="panel" id="meters-panel">
      <h3>มิเตอร์ / Meters</h3>
      <div class="device-table-wrap">
        <table class="device-table">
          <thead>
            <tr>
              <th style="width: 80px;">Status</th>
              <th>Meter</th>
              <th style="width: 220px;">Serial</th>
            </tr>
          </thead>
          <tbody id="device-rows">
            <tr><td class="empty" colspan="3">กำลังโหลด...</td></tr>
          </tbody>
        </table>
      </div>
    </section>

    <section class="panel hidden" id="billing-panel">
      <div class="panel-head">
        <button class="primary small-btn" id="bill-new-btn" type="button">สร้างบิลใหม่</button>
      </div>
      <div id="bill-data" class="bill-data hidden">
        <div class="device-table-wrap bill-table-wrap">
          <table class="device-table bill-table">
            <thead>
              <tr>
                <th>Meter</th>
                <th>Serial</th>
                <th>Solar ผลิตได้ (kWh)</th>
                <th>ส่งเข้า กฟภ./กฟน. (kWh)</th>
                <th>สุทธิใช้เอง (kWh)</th>
              </tr>
            </thead>
            <tbody id="bill-rows">
              <tr><td class="empty" colspan="5">ยังไม่มีบิล</td></tr>
            </tbody>
          </table>
        </div>
        <div class="kv"><span>พลังงานสุทธิ (kWh)</span><strong id="bill-energy">-</strong></div>
        <div class="kv"><span>ยอดเรียกเก็บ</span><strong id="bill-amount">-</strong></div>
        <p class="muted small" id="bill-note"></p>
      </div>

      <div class="btn-row">
      </div>
    </section>

    <div class="modal hidden" id="bill-modal" role="dialog" aria-modal="true">
      <div class="modal-content">
        <div class="modal-header">
          <h3>สร้างใบแจ้งค่าไฟ</h3>
          <button class="ghost icon-btn" id="bill-modal-close" aria-label="ปิด">
            <svg width="18" height="18" viewBox="0 0 24 24" fill="none" aria-hidden="true">
              <path d="M6 6l12 12M18 6L6 18" stroke="currentColor" stroke-width="2" stroke-linecap="round"/>
            </svg>
          </button>
        </div>
        <div class="modal-body">
          <div class="field">
            <label>เลือกมิเตอร์</label>
            <div id="modal-meter-list" class="checkbox-list"></div>
          </div>
          <div class="field grid-2">
            <div>
              <label for="bill-start">วันที่เริ่ม</label>
              <input type="date" id="bill-start">
            </div>
            <div>
              <label for="bill-end">ถึงวันที่</label>
              <input type="date" id="bill-end">
            </div>
          </div>
          <div class="field grid-2">
            <div>
              <label for="bill-rate">อัตรา (฿/kWh)</label>
              <input type="number" id="bill-rate" step="0.01" placeholder="4.20">
            </div>
            <div>
              <label for="bill-type">ประเภทอัตรา</label>
              <select id="bill-type">
                <option value="flat">Flat rate</option>
                <option value="tou">TOU (Mock)</option>
              </select>
            </div>
          </div>
        </div>
        <div class="modal-footer">
          <button class="ghost small-btn" id="bill-cancel" type="button">ยกเลิก</button>
          <button class="primary" id="bill-confirm" type="button">สร้างบิล</button>
        </div>
      </div>
    </div>

  <script src="./plant.js" defer></script>
</body>
</html>
